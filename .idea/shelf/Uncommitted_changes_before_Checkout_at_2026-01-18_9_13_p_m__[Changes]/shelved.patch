Index: web/styles.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/* Title: styles.css */\r\n/* Author: Ali Abbas */\r\n/* Description: Core styling for chat UI and database view. */\r\n/* Date: Jan 18, 2026 */\r\n/* Version: 1.2.0 */\r\n\r\n:root{\r\n\r\n  /* Surfaces */\r\n  --bg-page:#eef5f7;               /* light clinic background */\r\n  --bg-app:#f7fbfc;                /* main container */\r\n  --bg-chat:#f3f8fa;               /* chat zone */\r\n  --bg-panel:#ffffff;              /* panels */\r\n\r\n  /* Text */\r\n  --text:#0f2430;                  /* deep navy-teal */\r\n  --muted:rgba(15,36,48,0.62);\r\n\r\n  /* Accents (medical) */\r\n  --blue:#1f8ee6;                  /* clinical blue */\r\n  --teal:#20b7b0;                  /* calm teal */\r\n  --green:#2bb673;                 /* ‚Äúvitals stable‚Äù green */\r\n  --red:#e34b4b;                   /* alert red (optional) */\r\n\r\n  /* Lines / borders */\r\n  --border2:rgba(15,36,48,0.10);\r\n\r\n  /* Chat bubbles */\r\n  --bubble-bot:#ffffff;\r\n  --bubble-bot-border:rgba(15,36,48,0.12);\r\n\r\n  --bubble-user:rgba(31,142,230,0.14);\r\n  --bubble-user-border:rgba(31,142,230,0.28);\r\n\r\n  /* Inputs */\r\n  --composer-bg:rgba(255,255,255,0.86);\r\n  --input-bg:#ffffff;\r\n\r\n  /* Shadows + radius */\r\n  --shadow: 0 14px 34px rgba(15,36,48,0.14);\r\n  --shadow-soft: 0 10px 22px rgba(15,36,48,0.10);\r\n  --radius:18px;\r\n\r\n  /* Fonts */\r\n  --font-ui: system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif;\r\n  /* Swap out the serif title for a modern ‚Äúhospital signage‚Äù vibe */\r\n  --font-title: system-ui, -apple-system, \"Segoe UI\", Roboto, Arial, sans-serif;\r\n}\r\n\r\n*{ box-sizing:border-box; }\r\n\r\n\r\n/* Toggle button styling */\r\n.theme-toggle{\r\n  border:1px solid var(--border2);\r\n  background: rgba(255,255,255,0.70);\r\n  color: var(--text);\r\n  padding: 10px 12px;\r\n  border-radius: 14px;\r\n  cursor:pointer;\r\n  font-weight:750;\r\n  font-family: var(--font-title);\r\n  box-shadow: 0 6px 14px rgba(15,36,48,0.06);\r\n}\r\n.theme-toggle:hover{\r\n  border-color: rgba(31,142,230,0.28);\r\n}\r\n\r\n/* =========================\r\n   Dark Mode Overrides\r\n   Triggered by: <html data-theme=\"dark\">\r\n   ========================= */\r\nhtml[data-theme=\"dark\"]{\r\n  --bg-page:#0b1118;\r\n  --bg-app:#0e141b;\r\n  --bg-chat:#0b1118;\r\n  --bg-panel:#0f1722;\r\n\r\n  --text:#e8eef6;\r\n  --muted:rgba(232,238,246,0.70);\r\n\r\n  --border2:rgba(255,255,255,0.08);\r\n\r\n  --bubble-bot:#121b26;\r\n  --bubble-bot-border:rgba(255,255,255,0.10);\r\n\r\n  --bubble-user:rgba(31,142,230,0.18);\r\n  --bubble-user-border:rgba(31,142,230,0.32);\r\n\r\n  --composer-bg:rgba(255,255,255,0.03);\r\n  --input-bg:rgba(255,255,255,0.05);\r\n\r\n  --shadow: 0 12px 30px rgba(0,0,0,0.45);\r\n  --shadow-soft: 0 10px 22px rgba(0,0,0,0.35);\r\n}\r\n\r\n/* Make the page background switch too (since body sets a gradient) */\r\nhtml[data-theme=\"dark\"] body{\r\n  background:\r\n    radial-gradient(1200px 700px at 25% -10%, rgba(32,183,176,0.12), transparent 55%),\r\n    radial-gradient(900px 650px at 95% 0%, rgba(31,142,230,0.12), transparent 55%),\r\n    var(--bg-page);\r\n}\r\n\r\n\r\nhtml, body{\r\n  height:100%;\r\n}\r\n\r\nbody{\r\n  margin:0;\r\n  font-family: var(--font-ui);\r\n  color:var(--text);\r\n\r\n  /* Subtle ‚Äústerile‚Äù gradients (no gold; clean clinical light) */\r\n  background:\r\n    radial-gradient(1200px 700px at 25% -10%, rgba(32,183,176,0.18), transparent 55%),\r\n    radial-gradient(900px 650px at 95% 0%, rgba(31,142,230,0.18), transparent 55%),\r\n    linear-gradient(180deg, rgba(255,255,255,0.8), rgba(238,245,247,0.8)),\r\n    var(--bg-page);\r\n}\r\n\r\n/* App shell */\r\n.app{\r\n  height:100vh;\r\n  max-width: 980px;\r\n  margin: 0 auto;\r\n\r\n  background:\r\n    linear-gradient(180deg, rgba(15,36,48,0.03), transparent 45%),\r\n    var(--bg-app);\r\n\r\n  border-left: 1px solid var(--border2);\r\n  border-right: 1px solid var(--border2);\r\n  box-shadow: var(--shadow);\r\n\r\n  display:grid;\r\n  grid-template-rows: auto 1fr;\r\n  min-height: 0;\r\n}\r\n\r\n/* Header */\r\n.topbar{\r\n  padding: 14px 16px 12px;\r\n  border-bottom: 1px solid var(--border2);\r\n  display:flex;\r\n  align-items:flex-end;\r\n  justify-content:space-between;\r\n  gap:16px;\r\n  position:relative;\r\n\r\n  /* ‚ÄúFrosted clinic glass‚Äù */\r\n  background: rgba(255,255,255,0.78);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n/* Replace gold trim with ‚ÄúECG pulse‚Äù teal-blue line */\r\n.topbar::after{\r\n  content:\"\";\r\n  position:absolute;\r\n  left:0; right:0; bottom:-1px;\r\n  height:2px;\r\n  background: linear-gradient(90deg, transparent, var(--teal), var(--blue), transparent);\r\n  opacity:0.65;\r\n}\r\n\r\n.title{\r\n  font-size:18px;\r\n  font-weight:850;\r\n  letter-spacing:0.2px;\r\n  font-family: var(--font-title);\r\n}\r\n\r\n.subtitle{\r\n  font-size:12px;\r\n  color:var(--muted);\r\n  margin-top:4px;\r\n  font-family: var(--font-ui);\r\n}\r\n\r\n/* Tabs */\r\n.tabs{\r\n  display:flex;\r\n  gap:10px;\r\n  align-items:center;\r\n}\r\n\r\n.tab{\r\n  border:1px solid var(--border2);\r\n  background: rgba(255,255,255,0.70);\r\n  color: var(--text);\r\n  padding: 10px 12px;\r\n  border-radius: 14px;\r\n  cursor:pointer;\r\n  font-weight:720;\r\n  letter-spacing:0.15px;\r\n  font-family: var(--font-title);\r\n  box-shadow: 0 6px 14px rgba(15,36,48,0.06);\r\n}\r\n\r\n.tab:hover{\r\n  border-color: rgba(31,142,230,0.28);\r\n  box-shadow: 0 8px 18px rgba(15,36,48,0.10);\r\n}\r\n\r\n.tab.active{\r\n  border-color: rgba(32,183,176,0.55);\r\n  background: linear-gradient(180deg, rgba(32,183,176,0.18), rgba(255,255,255,0.78));\r\n  box-shadow: 0 10px 22px rgba(15,36,48,0.12);\r\n}\r\n\r\n/* Main area must be allowed to shrink; otherwise chat pushes composer */\r\n.main{\r\n  height:100%;\r\n  min-height:0;\r\n}\r\n\r\n/* Views: only the active one is shown */\r\n.view{\r\n  display:none;\r\n}\r\n\r\n.view.active{\r\n  display:grid;\r\n  grid-template-rows: 1fr auto;\r\n  height:100%;\r\n  min-height:0;\r\n}\r\n\r\n/* Chat zone */\r\n.chat{\r\n  padding: 16px;\r\n  background: var(--bg-chat);\r\n\r\n  overflow-y:auto;\r\n  min-height:0;\r\n\r\n  display:flex;\r\n  flex-direction:column;\r\n  gap:10px;\r\n\r\n  font-family: var(--font-ui);\r\n}\r\n\r\n/* Bubbles */\r\n.bubble{\r\n  max-width:72%;\r\n  padding: 10px 12px;\r\n  border-radius: var(--radius);\r\n  line-height:1.35;\r\n  font-size:14px;\r\n  white-space:pre-wrap;\r\n  word-wrap:break-word;\r\n  font-family: var(--font-ui);\r\n  box-shadow: 0 10px 20px rgba(15,36,48,0.06);\r\n}\r\n\r\n.bot{\r\n  align-self:flex-start;\r\n  background: var(--bubble-bot);\r\n  border: 1px solid var(--bubble-bot-border);\r\n}\r\n\r\n.user{\r\n  align-self:flex-end;\r\n  background: var(--bubble-user);\r\n  border: 1px solid var(--bubble-user-border);\r\n}\r\n\r\n/* Composer */\r\n.composer{\r\n  display:grid;\r\n  grid-template-columns: 1fr auto;\r\n  gap:10px;\r\n  padding: 12px;\r\n  border-top: 1px solid var(--border2);\r\n  background: var(--composer-bg);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.input{\r\n  padding: 12px 12px;\r\n  border-radius: 14px;\r\n  border: 1px solid var(--border2);\r\n  background: var(--input-bg);\r\n  color: var(--text);\r\n  outline:none;\r\n  font-family: var(--font-ui);\r\n  box-shadow: 0 10px 18px rgba(15,36,48,0.06);\r\n}\r\n\r\n.input:focus{\r\n  border-color: rgba(32,183,176,0.60);\r\n  box-shadow: 0 0 0 3px rgba(32,183,176,0.18);\r\n}\r\n\r\n.send{\r\n  padding: 0 16px;\r\n  border-radius: 14px;\r\n  border: 1px solid rgba(31,142,230,0.35);\r\n  background: linear-gradient(180deg, rgba(31,142,230,0.18), rgba(255,255,255,0.75));\r\n  color: var(--text);\r\n  cursor:pointer;\r\n  font-weight:800;\r\n  font-family: var(--font-title);\r\n  box-shadow: 0 10px 20px rgba(15,36,48,0.10);\r\n}\r\n\r\n.send:hover{\r\n  border-color: rgba(31,142,230,0.55);\r\n  box-shadow: 0 0 0 3px rgba(31,142,230,0.14);\r\n}\r\n\r\n/* Database view */\r\n#dbView.view.active{\r\n  display:block;\r\n  height:100%;\r\n  min-height:0;\r\n  padding: 16px;\r\n  background: var(--bg-chat);\r\n}\r\n\r\n.panel{\r\n  background: var(--bg-panel);\r\n  border: 1px solid var(--border2);\r\n  border-radius: var(--radius);\r\n  padding: 16px;\r\n  box-shadow: var(--shadow-soft);\r\n}\r\n\r\n.panelTitle{\r\n  font-size:16px;\r\n  font-weight:900;\r\n  letter-spacing:0.15px;\r\n  margin-bottom:6px;\r\n  font-family: var(--font-title);\r\n}\r\n\r\n.panelText{\r\n  color: var(--muted);\r\n  font-size:13px;\r\n  line-height:1.5;\r\n  margin-bottom:14px;\r\n  font-family: var(--font-ui);\r\n}\r\n\r\n.case-table{\r\n  display:flex;\r\n  flex-direction:column;\r\n  gap:8px;\r\n}\r\n\r\n.case-row{\r\n  display:grid;\r\n  grid-template-columns: 1.6fr 1fr 0.9fr 1.2fr 0.6fr 0.8fr;\r\n  gap:12px;\r\n  padding: 10px 12px;\r\n\r\n  background: rgba(255,255,255,0.72);\r\n  border: 1px solid var(--border2);\r\n  border-radius: 12px;\r\n  font-size:12px;\r\n  box-shadow: 0 8px 16px rgba(15,36,48,0.06);\r\n}\r\n\r\n.case-header{\r\n  font-size:12px;\r\n  text-transform:uppercase;\r\n  letter-spacing:0.6px;\r\n  color: var(--muted);\r\n\r\n  background: rgba(31,142,230,0.08);\r\n  border-color: rgba(31,142,230,0.14);\r\n}\r\n\r\n/* Options and badges */\r\n.option-row{\r\n  display:flex;\r\n  gap:8px;\r\n  flex-wrap:wrap;\r\n  margin: 6px 0 2px 0;\r\n}\r\n\r\n.option-btn{\r\n  padding: 8px 12px;\r\n  border-radius: 12px;\r\n  border:1px solid var(--border2);\r\n  background: rgba(32,183,176,0.14);\r\n  color: var(--text);\r\n  cursor:pointer;\r\n  box-shadow: 0 8px 14px rgba(15,36,48,0.06);\r\n}\r\n\r\n.option-btn:hover{\r\n  border-color: rgba(32,183,176,0.40);\r\n  box-shadow: 0 10px 18px rgba(15,36,48,0.10);\r\n}\r\n\r\n.badge-row{\r\n  display:flex;\r\n  flex-wrap:wrap;\r\n  gap:6px;\r\n  align-items:center;\r\n  margin: 4px 0 6px 0;\r\n}\r\n\r\n.badge-title{\r\n  font-weight:800;\r\n  font-size:12px;\r\n  color:var(--muted);\r\n}\r\n\r\n.badge{\r\n  padding: 6px 10px;\r\n  border-radius: 12px;\r\n  background: rgba(43,182,115,0.12);           /* stable green */\r\n  border: 1px solid rgba(43,182,115,0.28);\r\n  font-size:12px;\r\n}\r\n\r\n.reset-btn{\r\n  margin-top:6px;\r\n  padding: 8px 12px;\r\n  border-radius: 12px;\r\n  border: 1px solid rgba(227,75,75,0.30);\r\n  background: rgba(227,75,75,0.10);\r\n  color: var(--text);\r\n  cursor:pointer;\r\n}\r\n\r\n.reset-btn:hover{\r\n  border-color: rgba(227,75,75,0.45);\r\n  box-shadow: 0 0 0 3px rgba(227,75,75,0.12);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/web/styles.css b/web/styles.css
--- a/web/styles.css	(revision 71f74aca849d289f496daa8dcaab0e015567792a)
+++ b/web/styles.css	(date 1768787699496)
@@ -49,60 +49,6 @@
 
 *{ box-sizing:border-box; }
 
-
-/* Toggle button styling */
-.theme-toggle{
-  border:1px solid var(--border2);
-  background: rgba(255,255,255,0.70);
-  color: var(--text);
-  padding: 10px 12px;
-  border-radius: 14px;
-  cursor:pointer;
-  font-weight:750;
-  font-family: var(--font-title);
-  box-shadow: 0 6px 14px rgba(15,36,48,0.06);
-}
-.theme-toggle:hover{
-  border-color: rgba(31,142,230,0.28);
-}
-
-/* =========================
-   Dark Mode Overrides
-   Triggered by: <html data-theme="dark">
-   ========================= */
-html[data-theme="dark"]{
-  --bg-page:#0b1118;
-  --bg-app:#0e141b;
-  --bg-chat:#0b1118;
-  --bg-panel:#0f1722;
-
-  --text:#e8eef6;
-  --muted:rgba(232,238,246,0.70);
-
-  --border2:rgba(255,255,255,0.08);
-
-  --bubble-bot:#121b26;
-  --bubble-bot-border:rgba(255,255,255,0.10);
-
-  --bubble-user:rgba(31,142,230,0.18);
-  --bubble-user-border:rgba(31,142,230,0.32);
-
-  --composer-bg:rgba(255,255,255,0.03);
-  --input-bg:rgba(255,255,255,0.05);
-
-  --shadow: 0 12px 30px rgba(0,0,0,0.45);
-  --shadow-soft: 0 10px 22px rgba(0,0,0,0.35);
-}
-
-/* Make the page background switch too (since body sets a gradient) */
-html[data-theme="dark"] body{
-  background:
-    radial-gradient(1200px 700px at 25% -10%, rgba(32,183,176,0.12), transparent 55%),
-    radial-gradient(900px 650px at 95% 0%, rgba(31,142,230,0.12), transparent 55%),
-    var(--bg-page);
-}
-
-
 html, body{
   height:100%;
 }
Index: web/app.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Title: app.js\r\n// Author: Ali Abbas\r\n// Description: Client-side logic for chat and database tab rendering.\r\n// Date: Sep 28, 2025\r\n// Version: 1.1.0\r\n\r\nconst chat = document.getElementById(\"chat\");\r\nconst msgInput = document.getElementById(\"msgInput\");\r\nconst sendBtn = document.getElementById(\"sendBtn\");\r\nconst caseRows = document.getElementById(\"caseRows\");\r\nconst caseEmpty = document.getElementById(\"caseEmpty\");\r\n<script>\r\n(function(){\r\n  const root = document.documentElement; // <html>\r\n  const btn = document.getElementById(\"themeToggle\");\r\n  const STORAGE_KEY = \"theme\"; // \"light\" | \"dark\"\r\n\r\n  function applyTheme(theme){\r\n    if(theme === \"dark\") root.setAttribute(\"data-theme\", \"dark\");\r\n    else root.removeAttribute(\"data-theme\");\r\n\r\n    // Button label\r\n    if(btn){\r\n      btn.textContent = (theme === \"dark\") ? \"‚òÄ\uFE0F Light\" : \"\uD83C\uDF19 Dark\";\r\n    }\r\n  }\r\n\r\n  // Load saved theme OR default to system preference\r\n  const saved = localStorage.getItem(STORAGE_KEY);\r\n  const systemPrefersDark = window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n  const initialTheme = saved || (systemPrefersDark ? \"dark\" : \"light\");\r\n  applyTheme(initialTheme);\r\n\r\n  // Toggle on click\r\n  btn?.addEventListener(\"click\", () => {\r\n    const isDark = root.getAttribute(\"data-theme\") === \"dark\";\r\n    const next = isDark ? \"light\" : \"dark\";\r\n    localStorage.setItem(STORAGE_KEY, next);\r\n    applyTheme(next);\r\n  });\r\n})();\r\n</script>\r\n\r\n\r\n// Tabs / views\r\nconst tabButtons = document.querySelectorAll(\".tab\");\r\nconst views = document.querySelectorAll(\".view\");\r\n\r\n// ---------- Session ----------\r\n// Keep sessionId mutable so resetCase can start a brand-new session.\r\nlet sessionId = localStorage.getItem(\"sessionId\") || crypto.randomUUID();\r\nlocalStorage.setItem(\"sessionId\", sessionId);\r\n\r\n// ---------- View switching ----------\r\nfunction setActiveView(viewId) {\r\n  views.forEach(v => v.classList.toggle(\"active\", v.id === viewId));\r\n  tabButtons.forEach(b => b.classList.toggle(\"active\", b.dataset.view === viewId));\r\n  if (viewId === \"dbView\") {\r\n    loadCases();\r\n  }\r\n}\r\n\r\ntabButtons.forEach(btn => {\r\n  btn.addEventListener(\"click\", () => setActiveView(btn.dataset.view));\r\n});\r\n\r\n// ---------- Chat rendering ----------\r\nfunction addBubble(text, who) {\r\n  const div = document.createElement(\"div\");\r\n  div.className = `bubble ${who}`;\r\n  div.textContent = text;\r\n  chat.appendChild(div);\r\n  chat.scrollTop = chat.scrollHeight;\r\n}\r\n\r\n// ---------- Send message ----------\r\nasync function sendMessage() {\r\n  const text = msgInput.value.trim();\r\n  if (!text) return;\r\n\r\n  addBubble(text, \"user\");\r\n  msgInput.value = \"\";\r\n  msgInput.focus();\r\n\r\n  const payload = { sessionId, text };\r\n\r\n  try {\r\n    const res = await fetch(\"/api/message\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload)\r\n    });\r\n\r\n    if (!res.ok) {\r\n      addBubble(`Server error (${res.status}). Try again.`, \"bot\");\r\n      return;\r\n    }\r\n\r\n    const data = await res.json();\r\n    // If the case is locked, show the summary and a reset button\r\n        if (data.locked) {\r\n          addBubble(data.text || \"No response text\", \"bot\");\r\n          showResetButton();\r\n          return;\r\n        }\r\n    addBubble(data.text || \"No response text\", \"bot\");\r\n  } catch (err) {\r\n    addBubble(\"Network error. Is the Java server running?\", \"bot\");\r\n  }\r\n}\r\n\r\n// ---------- Events ----------\r\nsendBtn.addEventListener(\"click\", sendMessage);\r\nmsgInput.addEventListener(\"keydown\", (e) => {\r\n  if (e.key === \"Enter\") sendMessage();\r\n});\r\n\r\n// ---------- First message ----------\r\naddBubble(\"Hi, I‚Äôm Triage Bot. I‚Äôm here to help you understand how serious things might be. Tell me what‚Äôs going on, and I‚Äôll ask a few questions to guide you.\", \"bot\");\r\n\r\n// ---------- Database view ----------\r\nasync function loadCases() {\r\n  if (!caseRows) return;\r\n  caseRows.innerHTML = \"\";\r\n  caseEmpty.style.display = \"none\";\r\n\r\n  try {\r\n    // Fetch the latest summaries for the Database tab.\r\n    const res = await fetch(\"/api/cases\");\r\n    if (!res.ok) {\r\n      caseEmpty.textContent = `Failed to load cases (${res.status}).`;\r\n      caseEmpty.style.display = \"block\";\r\n      return;\r\n    }\r\n    const data = await res.json();\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      caseEmpty.textContent = \"No cases saved yet.\";\r\n      caseEmpty.style.display = \"block\";\r\n      return;\r\n    }\r\n    data.forEach(caseItem => renderCaseRow(caseItem));\r\n  } catch (err) {\r\n    caseEmpty.textContent = \"Failed to load cases. Is the Java server running?\";\r\n    caseEmpty.style.display = \"block\";\r\n  }\r\n}\r\n\r\nfunction renderCaseRow(item) {\r\n  const row = document.createElement(\"div\");\r\n  row.className = \"case-row\";\r\n\r\n  const started = formatDate(item.startedEpochMs);\r\n  row.appendChild(makeCell(started));\r\n  row.appendChild(makeCell(item.triageLevel || \"‚Äî\"));\r\n  row.appendChild(makeCell(item.severity || \"‚Äî\"));\r\n  row.appendChild(makeCell(item.duration || \"‚Äî\"));\r\n  row.appendChild(makeCell(String(item.notesCount ?? 0)));\r\n  row.appendChild(makeCell(String(item.redFlagCount ?? 0)));\r\n\r\n  caseRows.appendChild(row);\r\n}\r\n\r\nfunction makeCell(text) {\r\n  const div = document.createElement(\"div\");\r\n  div.textContent = text;\r\n  return div;\r\n}\r\n\r\nfunction formatDate(epochMs) {\r\n  if (!epochMs) return \"‚Äî\";\r\n  const date = new Date(Number(epochMs));\r\n  if (Number.isNaN(date.getTime())) return \"‚Äî\";\r\n  return date.toLocaleString();\r\n}\r\n\r\n// ---------- Reset handling ----------\r\nfunction showResetButton() {\r\n  const div = document.createElement(\"div\");\r\n  div.className = \"bubble bot\";\r\n  const btn = document.createElement(\"button\");\r\n  btn.textContent = \"Start a new case\";\r\n  btn.className = \"reset-btn\";\r\n  btn.addEventListener(\"click\", resetCase);\r\n  div.appendChild(btn);\r\n  chat.appendChild(div);\r\n  chat.scrollTop = chat.scrollHeight;\r\n}\r\n\r\nfunction resetCase() {\r\n  // Clear chat bubbles\r\n  chat.innerHTML = \"\";\r\n  // New session id\r\n  const newId = crypto.randomUUID();\r\n  sessionId = newId;\r\n  localStorage.setItem(\"sessionId\", newId);\r\n  // Fresh intro\r\n  addBubble(\"New case started. Tell me what‚Äôs going on (symptoms, duration, severity).\", \"bot\");\r\n}\r\n\r\n// ---------- UI helpers ----------\r\nfunction addOptions(options) {\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"option-row\";\r\n  options.forEach(opt => {\r\n    const btn = document.createElement(\"button\");\r\n    btn.textContent = opt;\r\n    btn.className = \"option-btn\";\r\n    btn.addEventListener(\"click\", () => {\r\n      msgInput.value = opt;\r\n      sendMessage();\r\n    });\r\n    container.appendChild(btn);\r\n  });\r\n  chat.appendChild(container);\r\n  chat.scrollTop = chat.scrollHeight;\r\n}\r\n\r\nfunction addBadgeRow(title, items) {\r\n  const div = document.createElement(\"div\");\r\n  div.className = \"badge-row\";\r\n  const label = document.createElement(\"div\");\r\n  label.className = \"badge-title\";\r\n  label.textContent = title + \":\";\r\n  div.appendChild(label);\r\n  items.forEach(txt => {\r\n    const badge = document.createElement(\"span\");\r\n    badge.className = \"badge\";\r\n    badge.textContent = txt;\r\n    div.appendChild(badge);\r\n  });\r\n  chat.appendChild(div);\r\n  chat.scrollTop = chat.scrollHeight;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/web/app.js b/web/app.js
--- a/web/app.js	(revision 71f74aca849d289f496daa8dcaab0e015567792a)
+++ b/web/app.js	(date 1768787701818)
@@ -4,43 +4,12 @@
 // Date: Sep 28, 2025
 // Version: 1.1.0
 
+// ---------- DOM ----------
 const chat = document.getElementById("chat");
 const msgInput = document.getElementById("msgInput");
 const sendBtn = document.getElementById("sendBtn");
 const caseRows = document.getElementById("caseRows");
 const caseEmpty = document.getElementById("caseEmpty");
-<script>
-(function(){
-  const root = document.documentElement; // <html>
-  const btn = document.getElementById("themeToggle");
-  const STORAGE_KEY = "theme"; // "light" | "dark"
-
-  function applyTheme(theme){
-    if(theme === "dark") root.setAttribute("data-theme", "dark");
-    else root.removeAttribute("data-theme");
-
-    // Button label
-    if(btn){
-      btn.textContent = (theme === "dark") ? "‚òÄÔ∏è Light" : "üåô Dark";
-    }
-  }
-
-  // Load saved theme OR default to system preference
-  const saved = localStorage.getItem(STORAGE_KEY);
-  const systemPrefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
-  const initialTheme = saved || (systemPrefersDark ? "dark" : "light");
-  applyTheme(initialTheme);
-
-  // Toggle on click
-  btn?.addEventListener("click", () => {
-    const isDark = root.getAttribute("data-theme") === "dark";
-    const next = isDark ? "light" : "dark";
-    localStorage.setItem(STORAGE_KEY, next);
-    applyTheme(next);
-  });
-})();
-</script>
-
 
 // Tabs / views
 const tabButtons = document.querySelectorAll(".tab");
Index: web/index.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!--Title: index-->\r\n<!--Author: Ali Abbas-->\r\n<!--Description: This file handles the HTML format of the website-->\r\n<!--Date: Dec 22, 2025-->\r\n<!--Version: 1.0.0-->\r\n\r\n\r\n<!doctype html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"utf-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n    <title>Triage Bot</title>\r\n    <link rel=\"stylesheet\" href=\"/styles.css\" />\r\n</head>\r\n<body>\r\n<div class=\"app\">\r\n    <header class=\"topbar\">\r\n        <div class=\"brand\">\r\n            <div class=\"title\">Triage Bot</div>\r\n            <div class=\"subtitle\">Educational triage guidance ‚Äî not a diagnosis</div>\r\n        </div>\r\n\r\n        <nav class=\"tabs\" aria-label=\"Primary\">\r\n            <button id=\"themeToggle\" class=\"theme-toggle\" type=\"button\" aria-label=\"Toggle theme\">\r\n                \uD83C\uDF19 Dark\r\n            </button>\r\n            <button class=\"tab active\" data-view=\"chatView\">Chat</button>\r\n            <button class=\"tab\" data-view=\"dbView\">Database</button>\r\n        </nav>\r\n    </header>\r\n\r\n    <main class=\"main\">\r\n        <section id=\"chatView\" class=\"view active\">\r\n            <main id=\"chat\" class=\"chat\"></main>\r\n\r\n            <footer class=\"composer\">\r\n                <input id=\"msgInput\" class=\"input\" placeholder=\"Type a symptom...\" autocomplete=\"off\" />\r\n                <button id=\"sendBtn\" class=\"send\">Send</button>\r\n            </footer>\r\n        </section>\r\n\r\n        <section id=\"dbView\" class=\"view\">\r\n            <div class=\"panel\">\r\n                <div class=\"panelTitle\">Database</div>\r\n                <div class=\"panelText\">\r\n                    Recent cases stored on this device.\r\n                </div>\r\n                <div class=\"case-table\">\r\n                    <div class=\"case-row case-header\">\r\n                        <div>Started</div>\r\n                        <div>Triage</div>\r\n                        <div>Severity</div>\r\n                        <div>Duration</div>\r\n                        <div>Notes</div>\r\n                        <div>EMERGENCIES</div>\r\n                    </div>\r\n                    <div id=\"caseRows\" class=\"case-rows\"></div>\r\n                    <div id=\"caseEmpty\" class=\"case-empty\">No cases saved yet.</div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </main>\r\n</div>\r\n\r\n<script src=\"/app.js\"></script>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/web/index.html b/web/index.html
--- a/web/index.html	(revision 71f74aca849d289f496daa8dcaab0e015567792a)
+++ b/web/index.html	(date 1768787701889)
@@ -22,9 +22,6 @@
         </div>
 
         <nav class="tabs" aria-label="Primary">
-            <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
-                üåô Dark
-            </button>
             <button class="tab active" data-view="chatView">Chat</button>
             <button class="tab" data-view="dbView">Database</button>
         </nav>
